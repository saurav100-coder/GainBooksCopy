@{
    ViewData["Title"] = "ManageCRMLead";   
    var cc1 = new CustomerControl.Variables("WebGodaddy"); 
    var df1 = new DataFunctions.DataFunctions(ref cc1);
    var D = df1.GetDateTimeISTNow().ToString("yyyy-MM-dd");
}

@*@Optimization.Scripts.Render("~/bundles/ManageRegCalls")*@
@*@Optimization.Styles.Render("~/Content/ManageRegCalls")*@

<link rel="stylesheet" href="~/Content/Custom/ManageRegCalls.css" />
<link rel="stylesheet" href="~/Content/Custom/PageLoader.css" />
<link rel="stylesheet" href="~/Content/Custom/GridCss.css" />
<link rel="stylesheet" href="~/Content/FrameWork/dataTables.bootstrap.min.css" />
<link rel="stylesheet" href="~/Content/FrameWork/jquery.contextMenu.css" />
<script src="~/Scripts/FrameWork/jquery.datetimepicker.full.min.js"></script>
<script src="~/Scripts/FrameWork/jquery.contextMenu.js"></script>
<script src="~/Scripts/Custom/ManageCRMLead.js"></script>
<link rel="stylesheet" href="~/Content/FrameWork/jquery.datetimepicker.min.css" />

@*@Optimization.Scripts.Render("~/Scripts/Link_Customer")
@Optimization.Scripts.Render("~/Scripts/Msg_To_Customer")*@

<script src="~/Scripts/Custom/LinkCustomer.js"></script>
<script src="~/Scripts/Custom/MsgToCustomer.js"></script>


<style>
    .disabledbutton {
        pointer-events: none;
        opacity: 0.4;
    }

    .loaderspin {
        border: 16px solid #f3f3f3;
        border-radius: 50%;
        border-top: 16px solid #3380cc;
        border-bottom: 16px solid #99ccff;
        width: 60px;
        height: 60px;
        -webkit-animation: spin 2s linear infinite;
        animation: spin 2s linear infinite;
    }

    [data-toggle] {
        position: relative;
    }

        [data-toggle]:before {
            content: '';
            /* hides the tooltip when not hovered */
            display: none;
            content: '';
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-bottom: 5px solid #1a1a1a;
            position: absolute;
            top: 30px;
            left: 15px;
            z-index: 8;
            font-size: 0;
            line-height: 0;
            width: 0;
            height: 0;
        }

        [data-toggle]:after {
            display: none;
            content: attr(data-toggle);
            position: absolute;
            top: 35px;
            left: 0px;
            padding: 0 5px;
            background: #1a1a1a;
            color: #fff;
            z-index: 9;
            font-size: 0.85em;
            height: 18px;
            max-width: none;
            text-align: center;
            line-height: 18px;
            -webkit-border-radius: 3px;
            -moz-border-radius: 3px;
            border-radius: 3px;
            white-space: nowrap;
            word-wrap: normal;
        }

        [data-toggle]:hover:before,
        [data-toggle]:hover:after {
            display: block;
        }

        [data-toggle].data-toggle-inner {
            max-width: none;
        }

    .MoreDetails:hover i {
        opacity: 0.5;
    }

        .MoreDetails:hover i:hover {
            opacity: 1;
        }

            .MoreDetails:hover i:hover .MoreDetails {
                background: #8f1fe7;
            }

    @@-webkit-keyframes spin {
        0% {
            -webkit-transform: rotate(0deg);
        }

        100% {
            -webkit-transform: rotate(360deg);
        }
    }

    @@keyframes spin {
        0% {
            transform: rotate(0deg);
        }

        100% {
            transform: rotate(360deg);
        }
    }

    .LoaderOverlay {
        background: #f3f3f3;
        display: none;
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        opacity: 0.5;
    }

    .xdsoft_datetimepicker {
        height: 212px;
    }

    td.xdsoft_date div {
        padding: 0px 9px 0px 9px;
    }

    div.tab {
        overflow: hidden;
        border: 1px solid #ccc;
        background-color: #f1f1f1;
    }
        /* Style the buttons inside the tab */
        div.tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 8px 23.4px;
            transition: 0.3s;
            font-size: 15px;
        }

    .tabcontent {
        display: none;
        padding: 6px 12px;
        border: 1px solid #ccc;
        border-top: none;
    }

    .content-wrapper {
        height: 580px;
    }

    .clickable:hover {
        /*box-shadow: 0px 8px 6px -8px gray; 0px -11px 8px -10px gray,top shadow */
        box-shadow: 0px 11px 8px -10px gray;
    }

    .sticky {
        position: fixed;
        top: 0;
        width: 100%;
    }

        .sticky + .ShowRemarksValues {
            padding-top: 102px;
        }

    .numberCircle {
        border-radius: 50%;
        width: 18px;
        height: 18px;
        padding: 1px;
        margin-right: 5px;
        background: #FF0000;
        border: 0.5px solid #FF0000;
        color: #fff;
        text-align: center;
        font: 11px Arial, sans-serif;
    }

    .context-menu-item {
        padding-left: 30px;
        padding-right: 20px;
    }

    .context-menu-list {
        width: 220px;
    }

    .context-menu-item labels context-menu-visible {
        padding-left: 15px;
    }
</style>
<script>
    @*$(function () {
        if ($(window).width() < 700) {
            window.location = '@Url.Action("ManageRegCallsMV2", "CRM")'
            //$("#yourContainer").load('@Url.Action("YourOtherAction", "YourController")');
        }
    });*@
</script>
<div class="container" style="width: 100%;"></div>
<input type="hidden" name="grid1" id="grid1" value="">
<input type="hidden" name="LoggedIn" id="LoggedUser" value="@httpContextAccessor.HttpContext?.Session.GetString("loginname")" />
<p class="text-center text-success">@TempData["Message"]</p>
<div class="panel panel-default">
    <div class="panel-body" style="height: 45px;">
        <div id="main" class="col-md-12">
            <div class="col-md-1">
                <a id="RegisterCalls" href='/Sales/LeadForm' title="" data-placement="bottom" data-toggle="Register New Lead" style="text-align:left">
                    <i class="glyphicon glyphicon-plus" style="font-size:17px; margin-right:10px"></i>
                </a>

                <a class="top" title="" onclick="ReloadGrid()" data-toggle="Refresh">
                    <i class="fa fa-refresh" style="font-size:19px;padding-top:10px; padding-right:10px; padding-bottom:5px "></i>
                </a>


            </div>
            <div id="dropdown" class="col-md-5 search " style="bottom: 12px;height:40px;">
                <select class="col-md-4" id="filter" style="height:26px;top: 10px;padding-left: 5px; width:21%">
                    <option value="0">Filter By</option>
                    <option value="1">No filter</option>
                </select>
                <div id="dateC" style="display:none" class="filterDiv">
                    <div class="col-md-1" style="top: 10px;">
                        <label class="ee" style="top: 10px;">   From: </label>
                    </div>
                    <input type="date" id="min" class="col-md-9" style="height:26px;top: 10px;" value="@D" max="@D" />
                    <div class="col-md-1" style="top: 10px;">
                        <label class="ww" style="top: 10px;">  To: </label>
                    </div>
                    <input type="date" id="max" class="col-md-9" style="height:26px;top: 10px;" value="@D" max="@D" />
                    <div id="search2" onclick="DateSearch();" class="btn btn-primary col-md-3 date" style="width: 40px;height:26px; margin-top:10px; top:10px;border-radius:0px;"><i class="glyphicon glyphicon-search"></i></div>
                </div>
                <div id="TextC" class="filterDiv" style="display:none;width: 500px;margin-top: 10px;margin-left: 140px;">
                    <input type="text" id="filterText" class="col-md-4" placeholder="Type to search" style="height:26px;padding-left:5px;margin-left: 20px;width:106px;" /><div id="search1" onclick="DoSearch();" class="btn btn-primary" style="padding-bottom: 3px;padding-top: 3px;margin-top: 10px;height:26px;border-radius:0px;"><i class="glyphicon glyphicon-search"></i></div>
                </div>
                <div id="assigntoC" class="filterDiv" style="display:none;">
                    @Html.List_Search("assignto", "- Select Employee -", "accmaster", "accname", "p_acccode", "rowstatus=0 and acctype = 3042 and status='Y'", 0,"", new {@class = "col-md-3", @style = "height:26px; margin:10px 0px 0px 20px; width:23%; padding-left:0px;top:10px;"}, true)
                </div>
                <div id="FilterText" class="col-md-2" style="float:left; display:none; margin-top: 10px;margin-left:15px; font-size:13px; border:1px solid lightgray; width: auto; padding:2px 5px 0px 5px; height:26px;top: 10px;bottom:34px;">
                    <b>
                        <p id="fText" style="float:left; margin-bottom:0px; margin-right:10px;  margin-top :-1px;"></p>
                        <a class='' id='' onclick='ReloadGrid();'>
                            <i class='glyphicon glyphicon-remove'></i>
                        </a>
                    </b>
                </div>
            </div>
            <div class="col-md-3" style="text-align:right; padding-right:0px; float:right;bottom: 12px;padding-top:10px;">
                <label id="info"> </label>
                <div class="btn btn-default" title="" data-placement="bottom" data-toggle="Newer" id="Prev" data-original-title="Newer" style="margin-top:10px; width:30px; padding-top:0px; padding-left:0px; padding-right:0px; padding-bottom:0px; margin-bottom:10px; color:#337ab7; border-radius:0px">
                    <i class="fa fa-angle-left" style="font-size:24px"></i>
                </div>
                <div class="btn btn-default" title="" data-placement="bottom" data-toggle="Older" id="Next" data-original-title="Older" style="margin-top:10px; width:30px; padding-top:0px; padding-left:0px; padding-right:0px; padding-bottom:0px; margin-bottom:10px;color:#337ab7; margin-left:0px;  border-radius:0px">
                    <i class="fa fa-angle-right" style="font-size:24px"></i>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="col-md-12 " style="padding-left: 0px;padding-right: 0px;">
    <div class="col-md-12 col-sm-12 TaskBar" style="font-family: verdana,arial,sans-serif; height:40px;padding-top: 10px;padding-top:8px;border-bottom: 2px solid lightgrey;padding-left: 5px;font-size: 11px;width:1130px">
        <div class="col-md-1 SNo." style="width:3%; text-align:center; padding-right:0px; padding-left:0px;margin-left:0px;padding-top:8px;"><b>SNo.</b></div>
        <div class="col-md-1 CallId" style="width:6%; text-align:left;   padding-right:0px; padding-left:0px; margin-left: 5px;padding-top: 8px;"><b>Lead Id</b></div>
        <div class="col-md-1 Date" style="width:6%; margin-left:0px;   padding-top:8px;   padding-left:0px;"><b>Date</b></div>
        <div class="col-md-1 Firm" style="width:6%; text-align:left;   padding-top:8px;   padding-left:10px; padding-right: 10px;"><b>Topic</b></div>
        <div class="col-md-1 Name" style="width:10%; text-align:center; padding-top:8px;   padding-left:10px;  padding-right: 10px;margin-right: 0px;"><b>Name</b></div>
        <div class="col-md-1 Mobile" style="width:9%; text-align:center; padding-left:20px; padding-top:8px;   padding-right:0px"><b>Mobile</b></div>
        <div class="col-md-1 Location" style="width:15%; text-align:center;  padding-left:0px;  padding-top:8px;   padding-right: 0px;"><b>Email</b></div>
        <div class="col-md-1 Issue" style="width:8%; text-align:center; padding-right:0px; padding-left:10px; padding-top:8px;"><b>Lead Status</b></div>
        @*<div class="col-md-1 Status" style="width:7%; text-align:right;  padding-right:0px; padding-left:5px;  padding-top:8px;"><b>Status</b></div>*@
        <div class="col-md-1 Assigned To" style="width:7%; text-align:center; padding-right:0px; padding-left:5px;"><b>Assigned To</b></div>
        <div class="col-md-1 LastCallTime" style="width:7%; text-align:center; padding-right:0px; padding-left:10px;bottom: 4px;"><b>Last Call Time</b></div>
        <div class="col-md-1 Onsiteflag" style="width:6%; text-align:center; padding-right:0px; padding-left:0px;bottom: 4px;"><b>Onsite flag</b></div>
        <div class="col-md-1 NextActionDate" style="text-align:center; padding-left:0px; padding-top:0px;bottom: 4px;"><b>Next Action Date</b></div>
        <div class="col-md-1 Source" style="width:8%; text-align:left; padding-right:0px; padding-left:0px;bottom: 4px;"><b>Call Source</b></div>
    </div>

    <div id="loading"><div colspan="5"><div id="loadingmessage" class="loader overlay col-md-offset-6" style="margin-top:20px;"></div><p id="Msg"></p></div></div>
    <div class="col-md-12 " id="example" style="width:100%; overflow-y:scroll; padding-bottom:20px; height:490px; padding-left: 0px;padding-right: 10px;"></div>
</div>
<input type="hidden" name="grid1" id="fvalue" value="@ViewBag.Message">
<div class="modal fade" id="Remark">
    <div class="modal-dialog" role="form">
        <div class="modal-content">
            <span class="close" data-dismiss="modal" style="padding:6px 12px 20px 20px; font-size:24px">&times;</span>
            <h4 style="text-align:center; font-size:16.5px; margin-top:0px; padding-top:30px; padding-left:30px;" class="modal-title"> Add Remark </h4>
            <div class="modal-body " style="padding-bottom:0px; padding-top:0px; height: 190px;">
                <hr style="margin-top:10px; margin-bottom:30px; width:80%" />
                <div id="myRemark" class="col-md-12" style="padding-right: 75px;">
                    <form Class="form-horizontal" role="form" method="post" id="RegForm" style="margin-top:0px;">
                        @Html.AntiForgeryToken()
                        @Html.ValidationSummary(true, " Check details. Please Fill Form Correctly.", new {@class = "text-danger"})
                        <p class="text-center text-success">@TempData["Message"]</p>
                        <div Class="form-group">
                            <input type="hidden" name="CallIdForRemark" id="CallIdForRemark" />
                            <input type="hidden" name="calledfrom" id="calledfrom" />
                            <Label for="inputEmail1" class="col-sm-4 control-label">Remark</Label>
                            <textarea id="Remarktextarea" cols="30" rows="4" name="Remark" value=""></textarea>
                            <Button type="button" id="SubmitRemarkBtn" onclick="SubmitCallRemark(this.id);" class="btn btn-primary" style="padding:0px; width:102px; height:26px; margin-top:100px; position:absolute; left:225px;">Submit</Button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="EngageStatus">
    <div class="modal-dialog" role="form">
        <div class="modal-content">
            <span class="close" data-dismiss="modal" style="padding:6px 12px 20px 20px; font-size:24px">&times;</span>
            <h4 style="text-align:center; font-size:16.5px; margin-top:0px; padding-top:30px; padding-left:30px;" class="modal-title"> Add Remark </h4>
            <div class="modal-body " style="padding-bottom:0px; padding-top:0px; height: 160px;">
                <hr style="margin-top:10px; margin-bottom:30px; width:80%" />
                <div id="myRemark" class="col-md-12" style="padding-right: 75px;">
                    <form Class="form-horizontal" role="form" method="post" style="margin-top:0px;">
                        @Html.ValidationSummary(true, " Check details. Please Fill Form Correctly.", new {@class = "text-danger"})
                        <p class="text-center text-success">@TempData["Message"]</p>
                        <div Class="form-group">
                            <input type="hidden" name="callId" id="callId" />
                            <Label for="inputEmail1" class="col-sm-4 control-label" style="margin-left: 100px;margin-top: 5px;">Call Engage Status</Label>
                            @Html.List_Search("callEngageStatus", "56", "- Select status -",0,"", new {@class = "col-md-3", @style = "height:26px; width:30%; padding-left:0px; top:10px;"}, false)
                            <Button type="button" onclick="SubmitCallEngage(this);" id="popup" class="btn btn-primary" style="padding:0px; width:102px; height:26px; margin-top:80px; position:absolute; left:225px;">Submit</Button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="MsgCustomer">
    <div class="modal-dialog" role="form">
        <div class="modal-content">
            <a data-dismiss="modal" Class="btn close"><span aria-hidden="true" style="font-size:24px">&times;</span></a>
            <h4 style="text-align:center; font-size:18px; margin-top:0px; padding-top:20px; padding-left: 30px;" class="modal-title"> Message To Customer </h4>
            <div class="modal-body" style="padding-bottom:0px; padding-top:0px;">
                <div id="msg">
                    <hr style="margin-top:10px; margin-bottom:30px; width:80%" />
                    <div id="myMsgCustomer" class="col-md-12">
                        <form Class="form-horizontal" role="form" method="post">
                            <div Class="form-group">
                                <input type="hidden" name="P_issuesfilegst" id="PCallMsgToCustomer" />
                                <label for="inputEmail1" class="col-sm-4 control-label" style="padding-top:3px">Customer Name</label>
                                <div class="col-sm-5">
                                    <input type="text" id="firmNameMsgtoCustomer" name="FirmName" style="width:230px" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="inputEmail1" class="col-sm-4 control-label" style="padding-top:3px">Phone No</label>
                                <div class="col-sm-5">
                                    <input type="text" name="Phoneno" id="Mobileno" style="width:230px" maxlength="10" placeholder="Enter 10 digit number only" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="inputEmail1" class="col-sm-4 control-label" style="padding-top:3px">Template</label>
                                <div class="col-sm-5">
                                    @Html.List_Search("Template", "- Select a template -", "msgTemplate", "Title", "P_MsgTemplate", "rowstatus=0 and Templatetype in (3120,3121,3122,3124) and active='Y'", 0, "", new {@onChange = "onTemplateChange(this.value,this.id)", @style = "width:230px; height:26px; padding-bottom:1px; padding-top:1px; font-size:inherit"})
                                    @*<select id="Template" name="" class="" style="width:230px; height:26px; padding-bottom:1px; padding-top:1px; font-size:inherit" onchange="myFunction(this.value,this.id);">
                                        <option value="0">Select an template</option>
                                        <option value="1">Customer Unavailable</option>
                                        <option value="2">Off in office</option>
                                        <option value="3">Mail to dealer</option>
                                        @*<option value="4">For Rajasthan Parties</option>
                                            <option value="5"> For Outside Rajasthan Parties</option>
                                        <option value="4"> Saral Softtech Pvt. Ltd. (SBI)</option>
                                        <option value="5"> TECHNOPINCH SOLUTIONS PVT LTD.</option>
                                        <option value="6"> Saral liaisoning and maintenance services</option>
                                        <option value="7"> Saral Softech Pvt.ltd. (ICICI)</option>
                                    </select>*@
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="inputEmail1" class="col-sm-4 control-label">Message</label>
                                <div class="col-sm-5">
                                    <textarea rows="4" cols="35" id="T" name="msg" style="width:230px" value=""></textarea>
                                </div>
                            </div>
                            <div Class="text-center" style="margin:20px 0px 10px 50px">
                                <Button type="button" id="MsgToCustomerSubmitBtn" Class="btn btn-primary" onclick="SubmitMsgToCustomer(this.id)" style="margin-right:15px">Submit</Button>
                                <a data-dismiss="modal" Class="btn btn-default">Cancel</a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="border:none; text-align:center; padding-bottom:20px">
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="MailToCustomer">
    <div class="modal-dialog" role="form">
        <div class="modal-content">
            <a data-dismiss="modal" Class="btn close"><span aria-hidden="true" style="font-size:24px">&times;</span></a>
            <h4 style="text-align:center; font-size:18px; margin-top:0px; padding-top:20px; padding-left:30px;" class="modal-title"> Mail To Customer </h4>
            <div class="modal-body" style="padding-bottom:0px; padding-top:0px;">
                <hr style="margin-top:10px; margin-bottom:30px; width:80%" />
                <div id="MailCustomerContent" class="col-md-12">
                    <form Class="form-horizontal" role="form" method="post">
                        <div class="form-group">
                            <input type="hidden" name="P_issuesfilegst" id="PCallMailToCustomer" />
                            <label for="inputEmail1" class="col-sm-4 control-label" style="padding-top:3px">Customer Name</label>
                            <div class="col-sm-5">
                                <input type="text" id="firmNameMailtoCustomer" name="FirmName" style="width:230px" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="inputEmail1" class="col-sm-4 control-label" style="padding-top:3px">Email Id</label>
                            <div class="col-sm-5">
                                <input type="email" id="emailMailtoCustomer" name="EmailId" style="width:230px" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="inputEmail1" class="col-sm-4 control-label">Email Content</label>
                            <div class="col-sm-5">
                                <textarea rows="4" cols="35" name="msg" id="msgMailToCustomer" value="" style="width:230px"></textarea>
                            </div>
                        </div>
                        <div Class="text-center" style="margin:20px 0px 10px 50px">
                            <Button type="button" id="MailtoCustomerSubmitBtn" onclick="SubmitMailToCustomer(this.id);" Class="btn btn-primary" style="margin-right:15px">Submit</Button>
                            <a data-dismiss="modal" Class="btn btn-default">Cancel</a>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer" style="border:none; text-align:center; padding-bottom:20px">
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="MailToDealer">
    <div class="modal-dialog" role="form">
        <div class="modal-content">
            <a data-dismiss="modal" Class="btn close"><span aria-hidden="true" style="font-size:24px">&times;</span></a>
            <h4 style="text-align:center; font-size:18px; margin-top:0px; padding-top:20px; padding-left:50px" class="modal-title"> Mail To Dealer </h4>
            <div class="modal-body" style="padding-bottom:0px; padding-top:0px;">
                <hr style="margin-top:10px; margin-bottom:30px; width:80%" />
                <div id="MailDealerContent" class="col-md-12">
                    <form Class="form-horizontal" role="form" method="post" id="MailDealer">
                        <input type="hidden" name="issuesfilegstkey" id="issuesfilegstkeyMailTodealer" />
                        <div class="form-group">
                            <label for="inputEmail1" class="col-sm-4 control-label" style="padding-top:3px">Dealer Name</label>
                            <div class="col-sm-5">
                                <select name="email" style="width:230px">
                                    <option selected="selected" value="0">- Select Dealer-</option>
                                    <option value="bikash_2006@rediffmail.com">bikash_2006@rediffmail.com</option>
                                    <option value="csc456457@hotmail.com">csc456457@hotmail.com</option>
                                    <option value="faheemsaral@gmail.com">faheemsaral@gmail.com</option>
                                    <option value="hcgupta@saralerp.com">hcgupta@saralerp.com</option>
                                    <option value="mithun411@gmail.com">mithun411@gmail.com</option>
                                    <option value="naveensaral@yahoo.com">naveensaral@yahoo.com</option>
                                    <option value="neha19985@gmail.com">neha19985@gmail.com</option>
                                    <option value="p2007_sharma@yahoo.co.in">p2007_sharma@yahoo.co.in</option>
                                    <option value="praveen_bhl@yahoo.in">praveen_bhl@yahoo.in</option>
                                    <option value="ramlawania@yahoo.co.in">ramlawania@yahoo.co.in</option>
                                    <option value="ratul.epi09@gmail.com">ratul.epi09@gmail.com</option>
                                    <option value="saral_nng@rediffmail.com">saral_nng@rediffmail.com</option>
                                    <option value="saralregistration@yahoo.com">saralregistration@yahoo.com</option>
                                    <option value="saralreg@yahoo.com">saralreg@yahoo.com</option>
                                    <option value="satpal_saral@yahoo.com">satpal_saral@yahoo.com</option>
                                    <option value="saralhnd@gmail.com">saralhnd@gmail.com</option>
                                    <option value="yashpalsaral@yahoo.com">yashpalsaral@yahoo.com</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="inputEmail1" class="col-sm-4 control-label" style="padding-top:3px"> Other Email</label>
                            <div class="col-sm-5">
                                <input type="email" name="OtherEmail" id="OtherEmail" style="width:230px" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="inputEmail1" class="col-sm-4 control-label">Email Content</label>
                            <div class="col-sm-5">
                                <textarea rows="4" cols="40" name="msg" style="width:230px" id="MailtodealerEmail"></textarea>
                            </div>
                        </div>
                        <div Class="text-center" style="margin:20px 0px 10px 50px">
                            <Button type="button" id="MailtoDealerSubmitBtn" onclick='SubmitMailtoDealer(this.id);' Class="btn btn-primary" style="margin-right:15px">Submit</Button>
                            <a data-dismiss="modal" Class="btn btn-default">Cancel</a>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer" style="border:none; text-align:center; padding-bottom:20px">
            </div>
        </div>
    </div>
</div>
<div class="LoaderOverlay">
    <div class="loaderspin" id="loadspin" style="text-align:center; margin-left:700px; margin-bottom:50px; margin-top:300px"></div>
</div>
<div class="modal fade" id="FollowUpCall">
    <div class="modal-dialog" role="form">
        <div class="modal-content">
            <a data-dismiss="modal" Class="btn close"><span aria-hidden="true">&times;</span></a>
            <h4 style="text-align:center; font-size:18px; margin-top:0px; padding-top:20px" class="modal-title">  </h4>
            <div class="modal-body" style="padding-bottom:0px; padding-top:0px;">
                <hr style="margin-top:10px; margin-bottom:30px; width:80%" />
                <div id="IssueDescription" class="col-md-12">
                    <div class="form-group">
                        <label class="col-sm-4 control-label" style="padding-top:20px; text-align:right">Issue :</label>
                        <div class="col-sm-5" style="padding-left:0px">
                            <textarea rows="4" cols="35" name="msg" style="width:230px" id="description" value=""></textarea><br />
                        </div>
                    </div>
                    <div class="form-group text-center" style="clear:both; margin:0px 0px 10px 50px">
                        <input type="submit" Class="btn btn-primary" style="margin-right:15px; margin-top:20px" value="Submit" />
                        <a data-dismiss="modal" Class="btn btn-default" style="margin-top:20px">Cancel</a>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="border:none; text-align:center; padding-bottom:20px">
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="Assignedto">
    <div class="modal-dialog" role="form">
        <div class="modal-content">
            <span class="close" data-dismiss="modal" style="padding:6px 12px 20px 20px; font-size: 25px;">&times;</span>
            <h4 style="text-align:center; font-size:18px; margin-top:0px;padding-top:20px;padding-left: 50px;" class="modal-title">Select Team Member</h4>
            <div class="modal-body " style="padding-bottom:0px; padding-top:0px;">
                <hr style="margin-top:10px; margin-bottom:30px; width:80%" />
                <form Class="form-horizontal" role="form" method="post" id="AssignedtoForm">
                    <input type="hidden" name="PCall" id="PCall" value="">
                    <input type="hidden" name="CalledFrom" value="ManageRegCall">
                    <div class="form-group">
                        <label class="col-sm-4 control-label" style="padding-top:0px">Select Employee</label>
                        @Html.List_Search("Employee", "- Select Employee -", "AccMaster", "AccName", "P_acccode", "rowstatus=0 and acctype = 3042 and status='Y'", 0, "", new {@onChange = "", @class = "form-control input-sm", @style = "padding-left:2px; border-radius:0px; padding-right:0px; margin:0px; width:202px"})
                    </div>
                    <div Class="text-center" style="margin:20px 0px 10px 50px">
                        <Button type="button" id="AssigntoSubmitBtn" Class="btn btn-primary" onclick="SubmitCallAssignTo(this.id);" style="margin-right:15px; margin-top:20px">Submit</Button>
                        <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-right:50px; margin-top:20px"> Cancel </button>
                    </div>
                </form>
            </div>
            <div class="modal-footer" style="border:none; text-align:center; padding-bottom:20px">
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="OnsiteModal">
    <div class="modal-dialog" role="form">
        <div class="modal-content">
            <span class="close" data-dismiss="modal" style="padding:6px 12px 20px 20px">&times;</span>
            <h4 style="text-align:center; font-size:18px; margin-top:0px; padding-top:20px; padding-left: 50px;" class="modal-title" id="Onsitevisit"></h4>
            <div class="modal-body " style="padding-bottom:0px; padding-top:0px;">
                <hr style="margin-top:10px; margin-bottom:30px; width:80%" />
                <form Class="form-horizontal" role="form" method="post" id="OnsiteForm">
                    <input type="hidden" name="PCall" id="PCall1" value="">
                    <div class="text-center"><p style="font-size:17px"> Do you want to register Onsite Service </p></div>
                    <div Class="text-center" style="margin:10px 0px 10px 50px">
                        <Button type="button" id="onsiteVisitSubmitBtn" Class="btn btn-primary" onclick="submitOnsiteVisit(this.id);" style="margin-right:15px; margin-top:20px; width:76px">Yes</Button>
                        <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-right:50px; margin-top:20px"> Cancel </button>
                    </div>
                </form>
            </div>
            <div class="modal-footer" style="border:none; text-align:center; padding-bottom:20px">
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="NoRow"></div>
<div class="modal fade" id="CallClosed">
    <div class="modal-dialog" role="form">
        <div class="modal-content">
            <a data-dismiss="modal" Class="btn close"><span aria-hidden="true" style="font-size:24px">&times;</span></a>
            <h4 style="text-align:center; font-size:18px; padding-left: 10px; margin-top:0px; padding-top:20px" class="modal-title"> Call Closed Successfully </h4>
            <div class="modal-body" style="padding-bottom:0px; padding-top:0px;margin-top: 20px;">
                <div id="CallClosedContent" class="col-md-6"></div>
                <div class="form-group text-center" style="clear:both; margin:0px 0px 10px 50px">
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="CallCollaborators">
    <div class="modal-dialog" role="form">
        <div class="modal-content">
            <span class="close" data-dismiss="modal" style="padding:6px 12px 20px 20px; font-size:24px">&times;</span>
            <h4 style="text-align:center; font-size:18px; margin-top:0px; margin-bottom:20px;padding-top:20px; padding-left: 40px;" class="modal-title"> Add Collaborators </h4>
            <div class="modal-body " style="padding-bottom:0px; padding-top:0px;">
                <div id="myCollaborators" class="col-md-12">
                    <form Class="form-horizontal" action="@Url.Action("AddCallCollaborators")" role="form" method="post">
                        <input type="hidden" name="PCall" id="PCall" value="">
                        @Html.AntiForgeryToken()
                        @Html.ValidationSummary(true, " Check details. Please Fill Form Correctly.", new {@class = "text-danger"})
                        <div class="form-group">
                            <label class="col-sm-4 control-label" style="padding-top:0px">Add Collaborator</label>
                            @Html.List_Search("collaboratorId", "- Select Employee -", "Accmaster", "accname", "p_acccode", "rowstatus = 0 and acctype=3042 and status='Y'", 0, "", new {@onChange = "", @class = "form-control input-sm", @style = "padding-left:2px; border-radius:0px; padding-right:0px; margin:0px; width:202px"})
                        </div>
                        <div Class="text-center" style="margin:20px 0px 10px 50px">
                            <Button type="button" id="CallCollabSubmitBtn" Class="btn btn-primary" onclick="submitCallCollaborator(this.id)" style="margin-right:25px; margin-top:20px">Submit</Button>
                            <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-right:50px; margin-top:20px"> Cancel </button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer" style="border:none; text-align:center; padding-bottom:20px">
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="LinkCustomer">
    <div class="modal-dialog" role="form" style="width:800px;">
        <div class="modal-content">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="padding-top: 10px;padding-left: 20px;padding-bottom: 20px;padding-right: 15px;">
                <span aria-hidden="true" style="font-size:24px">&times;</span>
            </button>
            <h4 class="modal-title" style="text-align:center; padding-top:20px">Link Customer</h4>
            <hr style="width:70%; margin-top:10px" />
            <div class="modal-body" id="LinkCustomerContent">
                <div>
                    <form Class="form-horizontal" action="@Url.Action("LinkCustomer")" role="form" method="post">
                        <div Class="form-group">
                            <input type="hidden" id="P_Customers" name="P_Customers" />
                            <input type="hidden" id="LinkCustomerCallId" name="LinkCustomerCallId" />
                        </div>
                        <div class="form-group">
                            <label for="inputEmail1" class="col-sm-4 control-label" style="padding-top:3px">Firm Name</label>
                            <div class="col-sm-5">
                                <input type="text" class="form-control input-sm" id="FirmName1" name="FirmName1" style="border-radius:0px; padding-left:4px; width:226px" value="" />
                            </div>
                        </div>
                        <div id="CustContainer" style="display:none; width:750px; background-color:white; font-family: verdana,arial,sans-serif; font-size:11px; margin-bottom:10px">
                            <table id="tblCustomers" class="table table-bordered" cellspacing="0">
                                <thead>
                                    <tr style="text-align:center;">
                                        <th>S.No</th>
                                        <th style="width:174px">CustName</th>
                                        <th style="width:85px">Mobile No</th>
                                        <th style="width:128px">BusinessType</th>
                                        <th style="width:110px">HomeTown</th>
                                        <th style="width:134px">Address</th>
                                        <th style="width:134px">BilledUpto</th>
                                        <th style="width:134px">OpenedUpto</th>
                                        <th style="width:90px">onsiteflag</th>
                                    </tr>
                                    @*<tr id="loading"><td colspan="9"><div id="loadingmessage" class="loader overlay col-md-offset-6"></div><p id="Msg"></p></td></tr>*@
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        <div Class="text-center" style="margin:20px 0px 10px 50px">
                            <Button type="button" id="SubmitLinkCustomerBtn" Class="btn btn-primary" onclick="SubmitLinkCustomer(this.id);" style="margin-right:15px">Submit</Button>
                            <button type="reset" data-dismiss="modal" class="btn btn-default">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="ViewCollaborator">
    <div class="modal-dialog" role="form">
        <div class="modal-content" style="width:400px; margin-left:100px;min-height:210px;">
            <span class="close" data-dismiss="modal" style="padding:6px 12px 20px 20px; font-size:24px">&times;</span>
            <h4 style="text-align:center; font-size:18px; margin-top:0px; margin-bottom:15px; padding-top:20px; padding-left:45px;" class="modal-title">Collaborators </h4>
            <div class="modal-body " style="padding-bottom:0px; padding-top:0px;min-height:150px">
                <div class="col-md-12" style="height:30px; margin-bottom:8px">
                    <div class="col-md-3" style="margin-top:5px;margin-top: 5px;width: 110px;"><b>Sno.</b></div>
                    <div class="col-md-9" style="padding-left: 0px;width: 170px;margin-top:5px;text-align:left;padding-right: 30px;"><b>Employee Name</b></div>
                </div>
                <div id="loading1">
                    <div colspan="8" style="padding:0px"><div id="loadingmessage" class="loader overlay col-md-offset-6"></div><p id="Msg"></p></div>
                </div>
                <div id="ShowCollaborators" class="col-md-12"></div>
            </div>
            <div class="modal-footer" style="border:none; text-align:center; padding-bottom:20px">
            </div>
        </div>
    </div>
</div>
<div class="modal fade ShowRemark" id="ViewRemarks">
    <div class="modal-dialog" role="form">
        <div class="modal-content" style="width: 775px;height: 250px; overflow-y:scroll;">
            <div class="modal-header" style="border:none; padding:0px">
                <span class="close" data-dismiss="modal" style="padding:6px 12px 6px 12px">&times;</span>
            </div>
            <div class="modal-body " style="padding-bottom:0px; padding-top:0px;">
                <h4 style="text-align:center; font-size:18px;  margin-top:0px; margin-bottom:15px" class="modal-title">Remarks</h4>
                <div class="col-sm-12 col-md-12" style="display:flex; position:absolute; padding-right: 0px; z-index:10; margin-bottom:40px; width:665px; color:#325faf; padding-left:0px; background-color:white; width:730px;">
                    <div class="col-sm-1 col-md-1 " style="text-align:center; padding-top:10px; margin-bottom:5px; padding-left: 0px;"><b>Sno.</b></div>
                    <div class="col-sm-3 col-md-3" style="padding-left: 0px;padding-top: 10px;margin-bottom: 5px;padding-right: 50px; text-align:center;"><b>Remark</b></div>
                    <div class="col-sm-3 col-md-3" style="text-align: center;padding-top: 10px;margin-bottom: 5px;padding-right: 0px;padding-left: 0px;width: 100px;"><b>Comm. type</b></div>
                    <div class="col-sm-3 col-md-3" style="text-align: center;padding-top: 10px;margin-bottom: 5px;"><b>Date</b></div>
                    <div class="col-sm-2 col-md-2" style="padding-left: 0px; text-align:right; padding-top: 10px; margin-bottom: 5px;padding-right:10px;"><b>Created by</b></div>
                </div>
                <div class="ShowRemark col-md-12" id="ShowRemarkContent" style="margin-top:50px;"></div>
            </div>
            <div class="modal-footer" style="border:none; text-align:center; padding-bottom:20px">
            </div>
        </div>
    </div>
</div>

@*For filtering on Hometown *@
<div class="modal fade" id="ModelHomeTownFilter">
    <div class="modal-dialog" role="form" style="left:auto; right:auto">
        <div class="modal-content" style="width:500px;">
            <div class="modal-header" style="padding-bottom:0px; border-bottom:0px">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" style="text-align:center">Hometown</h4>
                <hr style="width:70%; margin-top:10px" />
            </div>
            <form Class="form-horizontal" role="form" method="post" id="HomeTownfilter">
                <div class="form-group">
                    @*<label for="inputEmail1" class="col-sm-4 control-label" style="padding-top:3px">HomeTown</label>*@
                    @*<div class="col-sm-6">*@
                    <input type="text" class="form-control input-sm" id="searchString" name="searchString" style="border-radius:0px; padding-left:4px; width:226px;margin:auto;" />
                    @*</div>*@
                </div>
                <input type="hidden" name="homeTown" id="homeTown" />
                <div id="search" style="display:none; width:420px; background-color:white; margin:auto;font-family: verdana,arial,sans-serif; font-size:11px; margin-bottom:10px;">
                    <table id="htexample" class="table table-bordered">
                        <thead>
                            <tr style="text-align:center;">
                                <th>SNo</th>
                                <th>HomeTown</th>
                                <th style="width:25px;">District</th>
                                <th style="width:25px;">State</th>
                                <th style="width:25px;">Country</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div Class="text-center" style="margin:20px 0px 10px 50px">
                    <Button type="submit" Class="btn btn-primary" style="margin-right:15px; margin-top:20px">Submit</Button>
                    <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-right:50px; margin-top:20px"> Cancel </button>
                    @*<a href="@Url.Action("ManagePendingTasks")" Class="btn btn-default">Cancel</a>*@
                </div>
            </form>
            <div class="modal-footer" style="border:none; text-align:center; padding-bottom:20px">
            </div>
        </div>
    </div>
</div>
@*For filtering on ServicingAgent*@
<div class="modal fade" id="ServicingAgent">
    <div class="modal-dialog" role="form">
        <div class="modal-content">
            <div class="modal-header" style="border:none; padding:0px">
                <span class="close" data-dismiss="modal" style="padding:6px 12px 6px 12px">&times;</span>
                @*<a href="@Url.Action("ManagePendingTasks")" Class="btn close"><span aria-hidden="true">&times;</span></a>*@
            </div>
            <div class="modal-body" style="padding-bottom:0px; padding-top:0px;">
                <h4 style="text-align:center; font-size:18px; margin-top:0px;" class="modal-title">Select Dealer</h4>
                <hr style="margin-top:10px; margin-bottom:30px; width:80%" />
                <form Class="form-horizontal" role="form" method="post" id="ServicingAgentFilterForm">
                    <input type="hidden" name="PTask" id="PTask" value="">
                    @Html.AntiForgeryToken()
                    @Html.ValidationSummary(true, " Check details. Please Fill Form Correctly.", new {@class = "text-danger"})
                    <div class="form-group">
                        <label class="col-sm-4 control-label" style="padding-top:0px">Select Dealer</label>
                        @*@Html.List_Search("DealerId", "- Select Dealer -", "Dealers", "DealerName", "P_acccode", "superdealer = str(P_dealers)", 0, "", new {.onChange = "", .class = "form-control input-sm", .style = "padding-left:2px; border-radius:0px; padding-right:0px; margin:0px; width:202px"})*@
                    </div>

                    <div Class="text-center" style="margin:20px 0px 10px 50px">
                        <Button type="submit" Class="btn btn-primary" style="margin-right:15px; margin-top:20px">Submit</Button>
                        <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-right:50px; margin-top:20px"> Cancel </button>
                        @*<a href="@Url.Action("ManagePendingTasks")" Class="btn btn-default">Cancel</a>*@
                    </div>
                </form>
            </div>
            <div class="modal-footer" style="border:none; text-align:center; padding-bottom:20px">
            </div>
        </div>
    </div>
</div>







